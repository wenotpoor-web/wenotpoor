<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Buy the Book · WE NOT POOR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root{
      --bg:#000;
      --yellow:#FFD400;
      --text:#fff;
      --muted:rgba(255,255,255,.78);
      --panel:#0b0b0b;
      --line:rgba(255,212,0,.22);
      --danger:#FF2A2A;
      --radius:18px;
      --font:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    }

    *{box-sizing:border-box}
    html, body { height: 100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--yellow);
      font-family:var(--font);

      /* ✅ MOBILE FIX:
         Stop forcing vertical centering that can cause content to be clipped on short mobile viewports */
      display:block;
      padding:28px 14px 40px;
    }

    .wrap{
      width:min(980px, 100%);
      margin:0 auto;
    }

    /* Header */
    .hero{
      margin:0 0 16px 0;
      text-align:left;
    }
    .brand-wrap{
      display:inline-flex;
      flex-direction:column;
      gap:8px;
      margin:0 0 10px 0;
    }
    .brand{
      font-weight:900;
      letter-spacing:.18em;
      text-transform:uppercase;
      font-size:14px;
      line-height:1;
    }
    .brand-accent{
      width:92px;
      height:4px;
      background:var(--danger);
      border-radius:999px;
    }
    .hero h1{
      margin:0 0 8px 0;
      font-size:28px;
      line-height:1.15;
      letter-spacing:.02em;
    }
    .hero .sub{
      margin:0;
      color:var(--muted);
      font-size:13.5px;
      letter-spacing:.02em;
      max-width:72ch;
    }

    /* Card */
    .card{
      width:100%;
      background:linear-gradient(180deg, #0b0b0b 0%, #070707 100%);
      border:1px solid var(--line);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow:0 0 0 1px rgba(255,255,255,.04) inset;
    }
    .card-top{
      height:6px;
      background:var(--danger);
      opacity:.9;
    }

    .card-body{
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:28px;
      padding:24px;
      align-items:center;
    }

    /* Left: image switcher */
    .book{
      display:flex;
      align-items:center;
      gap:12px;
      justify-content:flex-start;
    }

    .nav-btn{
      width:44px;
      height:44px;
      border-radius:12px;
      border:1px solid rgba(255,212,0,.35);
      background:transparent;
      color:var(--yellow);
      font-size:18px;
      line-height:1;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:transform .08s ease, background .15s ease, border-color .15s ease;
      user-select:none;
      flex:0 0 auto;
    }
    .nav-btn:hover{
      background:rgba(255,212,0,.08);
      border-color:rgba(255,212,0,.6);
    }
    .nav-btn:active{ transform:scale(.98); }
    .nav-btn:focus{
      outline:none;
      box-shadow:0 0 0 3px rgba(255,212,0,.18);
    }

    .cover-frame{
      position:relative;
      width:260px;
      aspect-ratio: 2 / 3;
      border-radius:14px;
      background:#000;
      border:1px solid rgba(255,255,255,.08);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      flex:0 0 auto;
    }
    .cover-frame img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      cursor:zoom-in;
    }

    .cover-badge{
      position:absolute;
      left:10px;
      bottom:10px;
      font-size:12px;
      letter-spacing:.08em;
      text-transform:uppercase;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(0,0,0,.72);
      border:1px solid rgba(255,212,0,.25);
      color:var(--yellow);
      backdrop-filter: blur(6px);
    }

    /* Right: content */
    .content{ text-align:left; }

    .title{
      margin:0 0 10px 0;
      font-size:28px;
      line-height:1.15;
      letter-spacing:.02em;
    }

    /* ✅ MOBILE FIX:
       remove tight max-width on very small screens to prevent awkward truncation */
    .desc{
      margin:0 0 12px 0;
      color:var(--text);
      line-height:1.6;
      font-size:15.5px;
      max-width: 54ch;
      overflow-wrap:anywhere;
    }

    .meta{
      margin:0 0 18px 0;
      color:var(--muted);
      font-size:13.5px;
      letter-spacing:.02em;
    }

    .actions{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap:10px;
      margin-top:6px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:14px 20px;
      background:var(--yellow);
      color:#000;
      font-weight:900;
      text-decoration:none;
      border-radius:12px;
      border:1px solid rgba(255,212,0,.7);
      transition:transform .08s ease, filter .15s ease;
      min-width:180px;
      width:fit-content;
    }
    .btn:hover{ filter:brightness(1.06); }
    .btn:active{ transform:scale(.99); }

    .hint{
      color:rgba(255,255,255,.7);
      font-size:12.5px;
    }

    /* Quantity selector */
    .qty{
      display:flex;
      align-items:center;
      gap:10px;
      border:1px solid rgba(255,212,0,.25);
      border-radius:12px;
      padding:10px 12px;
      background:rgba(255,255,255,.02);
      width:fit-content;
    }
    .qty label{
      font-size:12.5px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:rgba(255,255,255,.72);
    }
    .qty select{
      appearance:none;
      -webkit-appearance:none;
      -moz-appearance:none;
      background:#000;
      color:var(--yellow);
      border:1px solid rgba(255,212,0,.35);
      border-radius:10px;
      padding:8px 34px 8px 12px;
      font-weight:800;
      cursor:pointer;
      position:relative;
      font-family:var(--font);
    }
    .qty .chev{
      margin-left:-28px;
      pointer-events:none;
      color:var(--yellow);
      font-size:12px;
      opacity:.9;
    }

    /* Lightbox */
    .lightbox{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.86);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
      z-index:9999;
    }
    .lightbox.open{ display:flex; }

    .lightbox-card{
      width:min(92vw, 820px);
      border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(255,212,0,.25);
      background:linear-gradient(180deg, #0b0b0b 0%, #060606 100%);
      box-shadow:0 0 0 1px rgba(255,255,255,.04) inset;
      position:relative;
    }
    .lightbox-top{
      height:6px;
      background:var(--danger);
      opacity:.9;
    }
    .lightbox-inner{
      padding:14px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .lightbox-inner img{
      width:100%;
      height:auto;
      max-height:80vh;
      object-fit:contain;
      display:block;
      cursor:zoom-out;
      border-radius:12px;
      background:#000;
    }
    .lightbox-close{
      position:absolute;
      top:10px;
      right:10px;
      width:44px;
      height:44px;
      border-radius:12px;
      border:1px solid rgba(255,212,0,.35);
      background:rgba(0,0,0,.55);
      color:var(--yellow);
      cursor:pointer;
      font-size:18px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .lightbox-close:hover{
      background:rgba(255,212,0,.08);
      border-color:rgba(255,212,0,.6);
    }
    .lightbox-caption{
      padding:0 14px 14px 14px;
      color:rgba(255,255,255,.75);
      font-size:12.5px;
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    /* ✅ MOBILE LAYOUT FIXES */
    @media (max-width: 860px){
      .hero{ text-align:center; }
      .brand-wrap{ align-items:center; }

      .card-body{
        grid-template-columns: 1fr;
        gap:16px;
        padding:18px;
        align-items:start;
      }

      .book{
        justify-content:center;
        gap:10px;
      }

      .cover-frame{
        width:min(72vw, 300px); /* scales image area on phones */
      }

      .content{
        text-align:center;
      }

      .title{
        font-size:22px;
      }

      .desc{
        max-width: none;        /* ✅ prevents narrow wrap/clipping feeling */
        font-size:15px;
      }

      .actions{
        align-items:center;
      }

      .btn{
        width:100%;             /* ✅ full-width CTA on mobile */
        max-width:360px;
      }

      .qty{
        width:100%;
        max-width:360px;
        justify-content:space-between;
      }

      .qty select{
        width:140px;
      }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <header class="hero" aria-label="Page header">
      <div class="brand-wrap">
        <span class="brand">WE NOT POOR</span>
        <span class="brand-accent" aria-hidden="true"></span>
      </div>

      <h1>Buy the Book</h1>

      <p class="sub">
        Order your paperback copy and we’ll ship it to your door.<br />
        Use the arrows to view the front and back cover before checkout.
      </p>
    </header>

    <section class="card" aria-label="Book purchase card">
      <div class="card-top" aria-hidden="true"></div>

      <div class="card-body">
        <!-- LEFT: cover switcher -->
        <div class="book">
          <button class="nav-btn" id="prevCover" type="button" aria-label="Previous cover">&#9664;</button>

          <div class="cover-frame" aria-live="polite" title="Click cover to view larger">
            <img id="coverImg" src="/images/front_final.png" alt="Front cover of the book" />
            <span class="cover-badge" id="coverLabel">Front</span>
          </div>

          <button class="nav-btn" id="nextCover" type="button" aria-label="Next cover">&#9654;</button>
        </div>

        <!-- RIGHT: text + CTA -->
        <div class="content">
          <h2 class="title">DO NOT READ THIS IF YOU WANT TO STAY POOR</h2>

          <p class="desc">
            This is not motivation. This is not comfort. This is a mirror.
            Read it with your guard down and a pen in your hand. The real work happens in the worksheets —
            the checkpoints you write, the excuses you expose, the decisions you tighten. If you just read,
            you’ll get a spark. If you participate, you’ll get a shift.
          </p>

          <p class="meta">Paperback. Ships directly to your address.</p>

          <div class="actions">
            <a class="btn" id="buyBtn" href="https://buy.stripe.com/YOUR_LINK_HERE">Buy Now</a>

            <div class="qty" aria-label="Quantity selector">
              <label for="qty">Quantity</label>
              <select id="qty" name="qty">
                <option value="1" selected>1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">5</option>
                <option value="7">5</option>
                <option value="8">5</option>
                <option value="9">5</option>
                <option value="10">5</option>             
              </select>
              <span class="chev">▼</span>
            </div>

            <span class="hint">Tip: Click the cover to view it larger.</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Cover preview">
    <div class="lightbox-card" role="document">
      <div class="lightbox-top" aria-hidden="true"></div>
      <button class="lightbox-close" id="lightboxClose" type="button" aria-label="Close preview">✕</button>
      <div class="lightbox-inner">
        <img id="lightboxImg" src="" alt="Book cover preview" />
      </div>
      <div class="lightbox-caption" id="lightboxCaption">Cover</div>
    </div>
  </div>

  <script>
    // Front/back cover toggle
    const covers = [
      { src: "/images/front_final.png", label: "Front", alt: "Front cover of the book" },
      { src: "/images/back_final.png",  label: "Back",  alt: "Back cover of the book" }
    ];

    let idx = 0;

    const img = document.getElementById("coverImg");
    const label = document.getElementById("coverLabel");
    const prev = document.getElementById("prevCover");
    const next = document.getElementById("nextCover");

    const qty = document.getElementById("qty");
    const buyBtn = document.getElementById("buyBtn");

    // Lightbox
    const lightbox = document.getElementById("lightbox");
    const lightboxImg = document.getElementById("lightboxImg");
    const lightboxCaption = document.getElementById("lightboxCaption");
    const lightboxClose = document.getElementById("lightboxClose");

    function render() {
      img.src = covers[idx].src;
      img.alt = covers[idx].alt;
      label.textContent = covers[idx].label;
    }

    function go(delta) {
      idx = (idx + delta + covers.length) % covers.length;
      render();
    }

    prev.addEventListener("click", () => go(-1));
    next.addEventListener("click", () => go(1));

    function openLightbox() {
      lightboxImg.src = covers[idx].src;
      lightboxImg.alt = covers[idx].alt;
      lightboxCaption.textContent = covers[idx].label + " Cover";
      lightbox.classList.add("open");
      lightbox.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closeLightbox() {
      lightbox.classList.remove("open");
      lightbox.setAttribute("aria-hidden", "true");
      lightboxImg.src = "";
      document.body.style.overflow = "";
    }

    img.addEventListener("click", openLightbox);

    lightboxClose.addEventListener("click", closeLightbox);
    lightbox.addEventListener("click", (e) => {
      if (e.target === lightbox) closeLightbox();
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && lightbox.classList.contains("open")) closeLightbox();
    });

    // Quantity selector behavior (tracking param only)
    const baseHref = buyBtn.getAttribute("href");
    function updateBuyLink(){
      const q = qty.value || "1";
      const joiner = baseHref.includes("?") ? "&" : "?";
      buyBtn.setAttribute("href", baseHref + joiner + "qty=" + encodeURIComponent(q));
    }
    qty.addEventListener("change", updateBuyLink);
    updateBuyLink();

    render();
  </script>
</body>
</html>
